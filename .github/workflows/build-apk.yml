name: Build APK with Docker

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: üê≥ Build APK
      run: |
        docker run \
          --rm \name: Build APK

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: üê≥ Build APK with Docker
      run: |
        # –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞–µ–º 'y'
        echo "y" | docker run \
          --rm \
          -v "${{ github.workspace }}":/app \
          -w /app \
          kivy/buildozer \
          buildozer android debug
          
        # –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ bash —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
        docker run \
          --rm \
          -v "${{ github.workspace }}":/app \
          -w /app \
          kivy/buildozer \
          bash -c "yes | buildozer android debug"
          
    - uses: actions/upload-artifact@v4
      with:
        name: app-apk
        path: bin/*.apk
          -v "${{ github.workspace }}":/app \
          -w /app \
          kivy/buildozer \
          buildozer android debug
          
    - uses: actions/upload-artifact@v4
      with:
        name: app-apk
        path: bin/*.apk